/*! hora.js 1.1.0 (https://github.com/mobify/hora.js) */
define(["$"],function(a){function b(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d.value;"string"==typeof e||e instanceof String?b.push(d.name+"="+encodeURIComponent(e.toString())):"number"==typeof e?b.push(d.name+"="+e.toString()):"boolean"==typeof e?b.push(d.name+"="+(e?"true":"false")):"object"==typeof e&&e&&b.push(d.name+"="+encodeURIComponent(JSON.stringify(e)))}return"?"+b.join("&")}function c(a){if(g._pompeiiEvents.length){var c=g._pompeiiPageviewId(),d="http://d3u9pmosrlcofa.cloudfront.net/p.gif"+b(g._pompeiiEvents)+"&pageview_id="+c;if(g._pompeiiEvents.clear(),a){var e=new XMLHttpRequest;e.open("GET",d,!0),e.send(null)}else{var f=new Image;f.src=d}}}function d(){for(var a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],b=[],c=0;16>c;c++){var d=Math.floor(16*Math.random());b.push(a[d])}return b.join("")}var e=a(window),f=a(document),g={isDebug:!1},h={nonInteraction:1},i={},j={},k=!1;return a.extend(a,{isString:function(a){return"[object String]"===Object.prototype.toString.call(a)}}),g.__carousels={clear:function(){i=[]}},g.__accordions={clear:function(){j=[]}},g.__validateObjectSchema=function(a,b,c){for(var d=0,e=c.length;e>d;d++){var f=c[d];if(!b.hasOwnProperty(f))throw"The "+a+" object doesn't contain the "+f+" property, which is required";if(!b[f])throw"The "+a+" object contains the "+f+" property, but it's value is falsy"}},g.__stringifyPropertyValues=function(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]=String(a[b]));return a},g.send=function(){var a=Array.prototype.slice.call(arguments);a.length&&(a.length>2?g.sendToPompeii(a[0],a.slice(1)):g.sendToPompeii(a[0],a[1]||!0),a.unshift("mobifyTracker.send","event"),g.isDebug?console.log("Parameters: %O",a):Mobify.analytics.ua.apply(null,a))},g.init=function(a){g.isDebug=a,e.on("touchmove",function(){k=!0}).on("touchend",function(){window.setTimeout(function(){k=!1},50)}).on("orientationchange",g.orientation.change).on("load",function(){var a=e.height();e.on("scroll",function(){e.scrollTop()+a===f.height()&&g.scroll.bottom("Page")})}),function(){var a=window.alert;window.alert=function(b){g.error.alert(b),a(b)}}()},g.proxyClassicAnalytics=function(){if(window._gaq&&!g.isDebug){var a=window._gaq.push;window._gaq.push=function(b){return g.send("Desktop Event: "+b[1],b[2],b[3],h),a(b)}}},g.proxyUniversalAnalytics=function(a,b,c){if(!g.isDebug){var d,e=function(){if(d?d.apply(null,arguments):(window.ga.q=window.ga.q||[]).push(arguments),/^(require|provide|send|ec:setAction|ec:addProduct)$/im.exec(a)&&("send"!==a||"pageview"!==b&&("event"!==b||"mobify"!==c))){var e=Array.prototype.slice.call(arguments,0);e[0]="mobifyTracker."+e[0],Mobify.analytics.ua.apply(null,e)}};window.ga=e,window.ga(function(){d=window.ga,window.ga=e})}},g.orientation={change:function(){var a=window.innerHeight>window.innerWidth?"Landscape to Portrait":"Portrait to Landscape";g.send("Orientation","Change",a,h)}},g.carousel={slide:function(a,b){var c=i[a];if(a="Carousel - "+a,k?(g.send(a,"Swipe","Slide #"+b,b,{metric15:0===c.swipes.length?1:0}),c.swipes.push(b)):(g.send(a,"Move","Slide #"+b,b,{metric15:0===c.slides.length?1:0}),c.slides.push(b)),c.viewed.push(b),!c.fullViewFired&&c.viewed.length>=c.totalSlides){c.fullView=!0;for(var d=1,e=c.totalSlides;e>=d;++d)if(-1===c.viewed.indexOf(d)){c.fullView=!1;break}c.fullView&&(g.send(a,"View All Slides","Total "+c.totalSlides,c.totalSlides),c.fullViewFired=!0)}},load:function(a,b){i.hasOwnProperty(a)||(i[a]={fullView:!1,fullViewFired:!1,totalSlides:b,slides:[],swipes:[],zooms:[],icons:[],viewed:[],clicks:[]}),i[a].viewed.push(1),g.send("Carousel - "+a,"Load","Total "+b,b,h)},zoom:function(a,b){var c=i[a];a="Carousel - "+a,g.send(a,"Zoom","Slide #"+b,b,{metric15:0===c.zooms.length?1:0}),c.zooms.push(b)},slideClick:function(a,b){var c=i[a];a="Carousel - "+a,g.send(a,"Click","Slide #"+b,b,{metric15:0===c.clicks.length?1:0}),c.clicks.push(b)},iconClick:function(a,b,c){var d=i[a],e=-1===c?"Previous":"Next";a="Carousel - "+a,g.send(a,e+" Icon","Slide #"+b,b,{metric15:0===d.icons.length?1:0}),d.icons.push(b)}},g.navigation={click:function(a,b){g.send("Navigation - "+a,"Click",b)}},g.search={toggle:function(){g.send("Search","Toggle")}},g.breadcrumb={click:function(){g.send("Breadcrumb","Click")}},g.backToTop={click:function(){g.send("Back To Top","Click")}},g.newsletter={click:function(){g.send("Newsletter","Click")}},g.footer={click:function(){g.send("Footer","Click")}},g.pagination={click:function(){g.send("Pagination","Click")}},g.filter={toggle:function(a){g.send("Filter - "+a,"Toggle")},change:function(a,b,c){g.send("Filter - "+a,"Change: "+b,c)}},g.scroll={up:function(a){g.send("Scroll - "+a,"Up")},down:function(a){g.send("Scroll - "+a,"Down")},top:function(a){g.send("Scroll - "+a,"Top")},bottom:function(a){g.send("Scroll - "+a,"Bottom")}},g.sizeGuide={open:function(a){g.send("Size Guide - "+a,"Open")}},g.emailFriend={open:function(a){g.send("Email Friend - "+a,"Open")}},g.emailMeBack={open:function(a){g.send("Email Me Back - "+a,"Open")}},g.color={change:function(a){g.send("Color - "+a,"Change")}},g.quantity={change:function(a,b){g.send("Quantity - "+a,"Change",null,b)}},g.size={change:function(a,b){g.send("Size - "+a,"Change",null,b)}},g.error={generic:function(a,b){g.send("Error",a,b)},alert:function(a){g.send("Error","Alert",a)},unsuccessfulSubmission:function(a){g.send("Error","Unsuccessful Submission",a)},unsuccessfulAddToCart:function(a){g.send("Error","Unsuccessful Add To Cart",a)},unsuccessfulPlaceOrder:function(a){g.send("Error","Unsuccessful Place Order",a)}},g.review={read:function(a){g.send("Review - "+a,"Read")}},g.sidebar={open:function(a){g.send("Sidebar - "+a,"Open")},close:function(a){g.send("Sidebar - "+a,"Close")}},g.cart={addItem:function(){var a=!1;for(var b in i)if(i.hasOwnProperty(b)){var c=i[b];c.fullViewFired&&(a=!0)}g.send("Cart","Add Item","None",0,{metric15:a?1:0})},removeItem:function(){g.send("Cart","Remove Item","None",0)}},g.minicart={toggle:function(){g.send("Mini-Cart","Toggle")},enableEdit:function(){g.send("Mini-Cart","Enable Edit")},disableEdit:function(){g.send("Mini-Cart","Disable Edit")},changeQuantity:function(a){g.quantity.change("Mini-Cart",a)}},g.checkout={start:function(a){g.send("Checkout","Start",a)}},g.accordion={open:function(a,b){var c=j[a];if(a="Accordion - "+a,g.send(a,"Open","Item #"+b,b,{metric15:0===c.opens.length?1:0}),c.opens.push(b),c.opens.length>1&&c.opens.length>c.closes.length){var d=c.opens.length-c.closes.length;g.send(a,"Open Multiple Items","Total "+d,d)}if(!c.fullViewFired&&c.opens.length>=c.totalItems){c.fullView=!0;for(var e=1,f=c.totalItems;f>=e;++e)if(-1===c.opens.indexOf(e)){c.fullView=!1;break}c.fullView&&(g.send(a,"View All Items","Total "+c.totalItems,c.totalItems),c.fullViewFired=!0)}},close:function(a,b){var c=j[a];c.closes.push(b)},load:function(a,b){j.hasOwnProperty(a)||(j[a]={fullView:!1,fullViewFired:!1,totalItems:b,opens:[],closes:[]}),g.send("Accordion - "+a,"Load","Total "+b,b,h)}},g.transaction={send:function(b,c,d,e){var f="mobifyTracker.ecommerce";if(!b||!a.isString(b))throw'Hora.transaction.send requires a string containing the transaction ID, i.e. "1234"';if(!c||!a.isString(c))throw'Hora.transaction.send requires a string containing the affiliation, usually the project name, i.e. "Acme Clothing"';if(!d||!a.isPlainObject(d))throw'Hora.transaction.send requires an object literal containing the transaction details, i.e. {"revenue": "11.99","shipping": "5","tax": "1.29"}';if(!e||!a.isArray(e))throw"Hora.transaction.send requires an Array containing the transaction item details";d.id=b,d.affiliation=c,g.__stringifyPropertyValues(d),!g.isDebug&&Mobify.analytics.ua(f+":addTransaction",d);for(var h=0,i=e.length;i>h;h++){var j=e[h];j.id=b,g.__validateObjectSchema("item",j,["id","name","sku"]),g.__stringifyPropertyValues(j),e[h]=j,!g.isDebug&&Mobify.analytics.ua(f+":addItem",j)}g.isDebug?(console.log("Transaction: %O",d),console.log("Transaction items: %O",e)):Mobify.analytics.ua(f+":send")}},g._pompeiiEvents=[],g._unloadHooked=!1,g.sendToPompeii=function(a,b){var d=!g._pompeiiEvents.length;g._pompeiiEvents.push({name:a,value:b}),d&&(setTimeout(function(){c(!1)},200),g._unloadHooked||(window.addEventListener("unload",function(){c(!0)},!1),g._unloadHooked=!0))},g.getPageviewId=function(){return g._pompeiiPageviewId||(g._pompeiiPageviewId=d(),g.sendToPompeii("pageview",!0)),g._pompeiiPageviewId},g});